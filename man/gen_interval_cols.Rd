% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/intervals.R
\name{gen_end}
\alias{gen_end}
\alias{gen_length}
\alias{gen_name}
\title{Generate columns to help describe numeric variable intervals}
\usage{
gen_end(dt, id_cols, col_stem, right_most_endpoint = Inf)

gen_length(dt, col_stem)

gen_name(
  dt,
  col_stem,
  format = "to",
  format_infinite = "plus",
  right_most_endpoint = Inf
)
}
\arguments{
\item{dt}{[\code{data.table()}]\cr
\code{col_stem}-specific data.}

\item{id_cols}{[\code{character()}]\cr
ID columns that uniquely identify each row of \code{dt}. This must include
\verb{\{col_stem\}_start}.}

\item{col_stem}{[\code{character(1)}]\cr
Base name of the numeric variable column. Does not include the '_start',
'_end' etc. suffix.}

\item{right_most_endpoint}{[\code{numeric(1)}]\cr
Assumed right most endpoint of \verb{\{col_stem\}_end}. Default is \code{Inf}.}

\item{format}{[\code{character(1)}]\cr
Formatting style for the interval names. Default is 'to'; can also be
'interval' or 'dash'.}

\item{format_infinite}{[\code{character(1)}]\cr
Formatting style for infinite endpoint intervals. Default is 'plus'; can
also be '+'. Ignored when \code{format = "interval"}.}
}
\value{
Invisibly returns reference to modified \code{dt}.
}
\description{
demUtils assumes numeric interval variables are grouped into
left-closed, right-open intervals. \eqn{a <= x < b}. Each interval can be
described by their endpoints from which interval lengths and nicer formatted
interval names can be created.
}
\details{
\code{gen_end} generates a new column \verb{\{col_stem\}_end} for the
right-open endpoint of each interval from a series of left-closed endpoints
\verb{\{col_stem\}_start}.

\code{gen_end} assumes that only the most detailed intervals are present in the
input dataset; including overlapping intervals will not return expected
results.

Input data \code{dt} for \code{gen_end} must:
\itemize{
\item Contain all columns specified in \code{id_cols}.
\item Have a column called \verb{\{col_stem\}_start}.
\item Have each row uniquely identified by each combination of \code{id_cols}.
}

\code{gen_length} generates a new column \verb{\{col_stem\}_length} for the length of
each interval. Input data \code{dt} for \code{gen_length} must contain
\verb{\{col_stem\}_start} and \verb{\{col_stem\}_end} columns.

\code{gen_name} generates a new column \verb{\{col_stem\}_name} describing each interval.

Formatting style for intervals:
\itemize{
\item \eqn{[a, b)} interval notation is used when \verb{format = 'interval}.
\item \verb{a to b} is used when \code{format = "to"}.
\item \code{a-b} is used when \code{format = "dash"}.
}

Formatting style for infinite endpoint interval:
\itemize{
\item \eqn{[a, Inf)} interval notation is used when \verb{format = 'interval}.
\item \verb{a plus} is used when \code{format_infinite = "plus"}.
\item \verb{a+} is used when \code{format = "+"}.
}
}
\examples{
input_dt <- data.table::data.table(location = "France", year = 2010,
                                   sex = "female",
                                   age_start = 0:95,
                                   value1 = 1, value2 = 2)
id_cols <- c("location", "year", "sex", "age_start")
gen_end(input_dt, id_cols, col_stem = "age")
gen_length(input_dt, col_stem = "age")
gen_name(input_dt, col_stem = "age")

}
